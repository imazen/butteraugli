[package]
name = "butteraugli-oxide"
version = "0.2.1"
edition = "2021"
license = "BSD-3-Clause"
repository = "https://github.com/imazen/butteraugli"
homepage = "https://github.com/imazen/butteraugli"
documentation = "https://docs.rs/butteraugli-oxide"
readme = "README.md"
description = "Pure Rust implementation of Google's butteraugli perceptual image quality metric from libjxl"
keywords = ["image", "quality", "perceptual", "metric", "butteraugli"]
categories = ["multimedia::images", "algorithms", "graphics"]
authors = ["Lilith River <lilith@imazen.io>"]
rust-version = "1.70"
exclude = [
    # Comparison outputs from local testing
    "comparison_outputs/",
]

[features]
default = ["simd"]
simd = []
cli = ["dep:clap", "dep:image", "dep:serde", "dep:serde_json"]

[dependencies]
# SIMD support
wide = "0.7"

# CLI dependencies (optional)
clap = { version = "4.5", features = ["derive"], optional = true }
image = { version = "0.25", default-features = false, features = ["png", "jpeg"], optional = true }
serde = { version = "1.0", features = ["derive"], optional = true }
serde_json = { version = "1.0", optional = true }

[[bin]]
name = "butteraugli"
required-features = ["cli"]

[dev-dependencies]
# Image I/O for testing
png = "0.17"

# JPEG encoding/decoding for roundtrip tests
mozjpeg = "0.10"
jpeg-decoder = "0.3"

# Testing utilities
approx = "0.5"

# Property-based testing
proptest = "1.4"

# Date/time for reference data generation
chrono = "0.4"

# Note: jpegli-sys dev-dependency removed for standalone repo
# The cpp_* tests that required it are excluded from the package
